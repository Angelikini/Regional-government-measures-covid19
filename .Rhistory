#install.packages(c("httr", "jsonlite"))
library(httr)
library(jsonlite)
## Post credentials to get an authentication token
credentials <- list(username="an@acaps.org", password="Beukstraat149")
auth_token_response <- httr::POST("https://api.acaps.org/api/v1/token-auth/", body=credentials)
auth_token <- httr::content(auth_token_response)$token
## Pull data from ACAPS API and loop through the pages
df <- data.frame()
request_url <- "https://api.acaps.org/api/v1/government-measures/" # Replace with the URL of the dataset you want to access
last_request_time <- Sys.time()
while (TRUE) {
## Wait to avoid throttling
while (as.numeric(Sys.time()-last_request_time) < 1) {
Sys.sleep(0.1)
}
## Make the request
response <- httr::GET(request_url, add_headers(Authorization=paste("Token", auth_token, sep=" ")))
last_request_time <- Sys.time()
## Append to the dataframe
df_results <- jsonlite::fromJSON(content(response, "text"))$results
df <- rbind(df, df_results)
## Loop to the next page; if we are on the last page, break the loop
if (("next" %in% names(content(response))) && (typeof(content(response)[["next"]]) != "NULL")) {
request_url <- content(response)[["next"]]
}
else {
break
}
}
View(df_results)
View(response)
View(credentials)
View(df)
rm(list=setdiff(ls(), "df"))
library("ggplot")
library("ggplot2")
View(df)
ggplot(df,aes(x=measures))
ggplot(df,aes(x=measure))
ggplot(df,aes(y=measure))
ggplot(df,aes(x=date_implemented,y=measure))
df
str(df)
df$date_implemented <- as.Date(df$date_implemented, "%Y/%m/%d")
str(df)
str(df)
##Change date columns to type "Date"
df$date_implemented <- as.Date(df$date_implemented, "%Y/%m/%d")
str(df)
str(df)
##Change date columns to type "Date"
df$date_implemented <- as.Date(df$date_implemented, "%Y/%m/%d")
df$entry_date<- as.Date(df$entry_date,"%Y/%m/%d")
str(df)
#Plots per region
#install libraries
library("ggplot2")
#creating graphs
ggplot(df,aes(x=date_implemented,y=measure))
View(df)
#install.packages(c("httr", "jsonlite"))
library(httr)
library(jsonlite)
## Post credentials to get an authentication token
credentials <- list(username="an@acaps.org", password="Beukstraat149")
auth_token_response <- httr::POST("https://api.acaps.org/api/v1/token-auth/", body=credentials)
auth_token <- httr::content(auth_token_response)$token
## Pull data from ACAPS API and loop through the pages
df <- data.frame()
request_url <- "https://api.acaps.org/api/v1/government-measures/" # Replace with the URL of the dataset you want to access
last_request_time <- Sys.time()
while (TRUE) {
## Wait to avoid throttling
while (as.numeric(Sys.time()-last_request_time) < 1) {
Sys.sleep(0.1)
}
## Make the request
response <- httr::GET(request_url, add_headers(Authorization=paste("Token", auth_token, sep=" ")))
last_request_time <- Sys.time()
## Append to the dataframe
df_results <- jsonlite::fromJSON(content(response, "text"))$results
df <- rbind(df, df_results)
## Loop to the next page; if we are on the last page, break the loop
if (("next" %in% names(content(response))) && (typeof(content(response)[["next"]]) != "NULL")) {
request_url <- content(response)[["next"]]
}
else {
break
}
}
rm(list=setdiff(ls(), "df"))
#checking if type of data is right
str(df)
#checking if type of data is right
str(df)
df2<-df
df2$date_implemented <- as.Date(df2$date_implemented, "%Y-%m-%d")
df$entry_date<- as.Date(df$entry_date,"%Y-%m-%d")
str(df)
str(df2)
#install.packages(c("httr", "jsonlite"))
library(httr)
library(jsonlite)
## Post credentials to get an authentication token
credentials <- list(username="an@acaps.org", password="Beukstraat149")
auth_token_response <- httr::POST("https://api.acaps.org/api/v1/token-auth/", body=credentials)
auth_token <- httr::content(auth_token_response)$token
## Pull data from ACAPS API and loop through the pages
df <- data.frame()
request_url <- "https://api.acaps.org/api/v1/government-measures/" # Replace with the URL of the dataset you want to access
last_request_time <- Sys.time()
while (TRUE) {
## Wait to avoid throttling
while (as.numeric(Sys.time()-last_request_time) < 1) {
Sys.sleep(0.1)
}
## Make the request
response <- httr::GET(request_url, add_headers(Authorization=paste("Token", auth_token, sep=" ")))
last_request_time <- Sys.time()
## Append to the dataframe
df_results <- jsonlite::fromJSON(content(response, "text"))$results
df <- rbind(df, df_results)
## Loop to the next page; if we are on the last page, break the loop
if (("next" %in% names(content(response))) && (typeof(content(response)[["next"]]) != "NULL")) {
request_url <- content(response)[["next"]]
}
else {
break
}
}
rm(list=setdiff(ls(), "df"))
#datacleaning
#checking if type of data is right
str(df)
df2<-df
##Change date columns to type "Date"
df2$date_implemented <- as.Date(df2$date_implemented, "%Y-%m-%d")
df2$entry_date<- as.Date(df2$entry_date,"%Y-%m-%d")
str(df2)
View(df2)
#datacleaning
#checking if type of data is right
str(df)
##Change date columns to type "Date"
df$date_implemented <- as.Date(df$date_implemented, "%Y-%m-%d")
df$entry_date<- as.Date(df$entry_date,"%Y-%m-%d")
str(df)
View(df)
rm(list=setdiff(ls(), "df"))
ggplot(df,aes(x=date_implemented,y=measure))
ggplot(df,aes(x=date_implemented,y=categpry))
ggplot(df,aes(x=date_implemented,y=category))
ggplot(df,aes(x=region,y=category))
ggplot(df,aes(region,category))
ggplot(df,aes(region,category)) +
geom_jitter())
ggplot(df,aes(region,category)) + geom_jitter())
ggplot(df,aes(region,category)) + geom_jitter()
ggplot(df,aes(region,category)) + geom_jitter()
plot(region,category,data=df)
plot(df$region,df$category,data=df)
a<-ggplot(df,aes(region,category))
View(a)
a+geom_blank()
typeof(df)
str(df)
df2<-df
#Change lists to characters
df2$category<- as.character(df2$category)
str(df2)
df2$region<- as.character(df2$region)
str(df2)
#Change lists to characters
df2$category<- as.character(df2$category)
df2$region<- as.character(df2$region)
df2$country<- as.character(df2$country)
str(df2)
View(df2)
#Change lists to characters
df$category<- as.character(df$category)
df$region<- as.character(df$region)
df$country<- as.character(df$country)
str(df)
#Plots per region
#install libraries
library("ggplot2")
#creating graphs
a<-ggplot(df,aes(region,category))
a+geom_blank()
a
a<-ggplot(df,aes(region,category))
a
rm(list=setdiff(ls(), "df"))
#Plots per region
#install libraries
library("ggplot2")
#creating graphs
a<-ggplot(df,aes(region,category))
a
a+geom_bar(color="green")
a+geom_bar(region,color="green")
a+geom_bar(region,color="green")
a+geom_bar(df$region,color="green")
a<-ggplot(df,aes(region,category))
a+geom_bar(df$region,color="green")
a<-ggplot(df,aes(region,category))
a+geom_bar(df$region,color="green")
rlang::last_error()
rlang::last_trace()
a<-ggplot(df,aes(region,category))+
a+geom_bar(df$region,color="green")
a+geom_bar(df$region,color="green")
a+geom_COL(df$region,color="green")
a+geom_col(region,color="green")
a+geom_col(x,color="green")
a+geom_col(color="green")
a<-ggplot(df,aes(region,category))
a+geom_col(color="green")
+facet_grid(category~.)
a<-ggplot(df,aes(region,category))
a+geom_col(color="green")
+facet_grid(category~.)
a<-ggplot(df,aes(region,category))
a+geom_col(color="green")+facet_grid(category~.)
a<-ggplot(df,aes(region))
a+geom_col(color="green")+facet_grid(category~.)
a<-ggplot(df,aes(region,category))
a+geom_col(color="green")+facet_grid(category~.)
a+geom_col(color="green")+facet_grid(.~category)
a+geom_col(color="green")+facet_grid(region~category)
a<-ggplot(df,aes(region,id))
a+geom_col(color="green")+facet_grid(,~category)
a<-ggplot(df,aes(region,id))
a+geom_col(color="green")+facet_grid(,~category)
a<-ggplot(df,aes(region,category))
a+geom_col(color="green")+facet_grid(,~category)
a<-ggplot(df,aes(region,id))
a+geom_col(color="green")+facet_grid(.~category)
a<-ggplot(df,aes(region))
a+geom_col(color="green")+facet_grid(.~category)
a+geom_bar(color="green")+facet_grid(.~category)
a+geom_bar(color="green",position="dodge")+facet_grid(.~category)
a+geom_bar(color="green",position="dodge")+facet_grid(.~category)+theme_bw()
a+geom_bar(color="green",position="dodge")+facet_grid(.~category)+theme_bw()+labs(x="")
a+geom_bar(color="green",position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="")
a+geom_bar(color="green",position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")
a<-ggplot(df,aes(region, group=category))
a+geom_bar(color="green",position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")
a+geom_bar(color="green",position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(color=region,position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(color=region,position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(color="region",position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(color=region,position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(fill=region,position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(fill=green,position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(fill="green",position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(fill=region,position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+scale_fill_manual("region")
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+scale_fill_manual("region",c(coral3,deeppink4,aquamarine4,green4,orangered4,royalblue4))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+scale_fill_manual("region",color=c(coral3,deeppink4,aquamarine4,green4,orangered4,royalblue4))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+scale_fill_manual("region",color=c(coral4,deeppink4,aquamarine4,green4,orangered4,royalblue4))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+scale_fill_manual("region",color=c("coral4","deeppink4","aquamarine4","green4","orangered4","royalblue4"))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+scale_fill_manual("region",c("coral4","deeppink4","aquamarine4","green4","orangered4","royalblue4"))
a+geom_bar(fill=ifelse(region),position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a<-ggplot(df,aes(region, group=category, color=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a<-ggplot(df,aes(region, group=category, fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a<-ggplot(df,aes(region, group=category, fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a<-ggplot(df,aes(region, group=category, fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a<-ggplot(df,aes(region, group=category, fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+guides(fill=FALSE)
a<-ggplot(df,aes(region, group=category, fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+guides(fill=FALSE)
#+scale_fill_manual("region",c("coral4","deeppink4","aquamarine4","green4","orangered4","royalblue4"))
a<-ggplot(df,aes(region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
#number of measures categories per continent
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
a<-ggplot(df,aes(y=region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(y=region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(category~.)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(y=region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(category~.)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
a+geom_bar(position="dodge")+facet_grid(category~.)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(y=region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(category~.)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
a+geom_bar(position="dodge")+facet_grid(category~.)+theme_bw()+labs(y="",x="")+theme(axis.text.y = element_text(angle = 0, vjust = 0.5, hjust=1))
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
a<-ggplot(df,aes(region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
jpeg(file="measures per continent and category.jpeg")
a<-ggplot(df,aes(measure,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
#number of measures categories per continent
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
#number of measures per continent per categories
jpeg(file="measures per continent and category.jpeg")
b<-ggplot(df,aes(measure,group=category,fill=region))
b+geom_bar(position="dodge")+facet_grid(.~category)+theme_
b+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
dev.off()
b<-ggplot(df,aes(measure,group=category[],fill=region))
b+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.print()
#Plots per region
#install libraries
library("ggplot2")
#creating graphs
#number of measures categories per continent
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
#number of measures per continent per categories
#jpeg(file="measures per continent and category.jpeg")
b<-ggplot(df,aes(measure,group=category[],fill=region))
#dev.off()
b+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
#Plots per region
#install libraries
library("ggplot2")
#creating graphs
#number of measures categories per continent
jpeg(file="categories per continent.jpeg")
a<-ggplot(df,aes(region,group=category,fill=region))
a+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
#number of measures per continent per categories
#jpeg(file="measures per continent and category.jpeg")
b<-ggplot(df,aes(measure,group=category[],fill=region))
b+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
#dev.off()
#number of measures per continent per categories
jpeg(file="measures per continent and category.jpeg")
b<-ggplot(df,aes(measure,group=category[],fill=region))
b+geom_bar(position="dodge")+facet_grid(.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
b+geom_bar(position="dodge")+facet_grid(rows=.~measures,columns=.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
b+geom_bar(position="dodge")+facet_grid(rows=measures,columns=category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
b+geom_bar(position="dodge")+facet_grid(rows=measures,cols=category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
b+geom_bar(position="dodge")+facet_grid(rows=measures,cols=.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
b+geom_bar(position="dodge")+facet_grid(rows=.~measures,cols=.~category)+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
b+geom_bar(position="dodge")+facet_grid(rows=vars(measures),cols=vars(category))+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
b<-ggplot(df,aes(measure,group=category,fill=region))
b<-ggplot(df,aes(region,group=category,fill=region))
b<-ggplot(df,aes(region,group=c(category,measure),fill=region))
b+geom_bar(position="dodge")+facet_grid(rows=vars(measures),cols=vars(category))+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
b+geom_bar(position="dodge")+facet_grid(rows=vars(measure),cols=vars(category))+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
b<-ggplot(df,aes(region,group=c(category,measure),fill=region))
b<-ggplot(df,aes(region,group=measure,fill=region))
b+geom_bar(position="dodge")+facet_grid(rows=vars(measure),cols=vars(category))+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
?jpeg
jpeg(file="measures per continent and category.jpeg",width=1000,height=2000)
b<-ggplot(df,aes(region,group=measure,fill=region))
b+geom_bar(position="dodge")+facet_grid(rows=vars(measure),cols=vars(category))+theme_bw()+labs(y="",x="")+theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
dev.off()
